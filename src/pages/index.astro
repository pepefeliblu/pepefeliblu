---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";
import { ChristmasSnowfall } from "../components/ChristmasSnowfall";
import { NewYearFireworks } from "../components/NewYearFireworks";
import "../styles/home.css";

const posts = (await getCollection("blog")).sort(
	(a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf(),
);
---

<BaseLayout title="dev-rueda" description="Personal tech blog and thoughts">
	<h1>Welcome! ðŸ™Œ</h1>

	<div class="avatar-wrapper">
		<img
			src="/pepefeliblu/images/site/juan_home_pic.webp"
			alt="Juan Rueda"
			width="160"
			height="160"
			alt="Juan Rueda"
			width="160"
			height="160"
			class="home-avatar normal"
		/>
		<img
			src="/pepefeliblu/images/site/xmas/juan_home_pic.webp"
			alt="Juan Rueda Christmas"
			width="160"
			height="160"
			class="home-avatar christmas"
		/>
		<a
			href="https://es.wikipedia.org/wiki/A%C3%B1o_viejo"
			class="viejo-sprite"
			target="_blank"
			rel="noopener noreferrer"
			aria-label="Learn more about AÃ±o Viejo"></a>
	</div>

	<p class="intro">
		This is my personal corner on the web where I share my thoughts on
		software development, technology, and learning.
	</p>

	<section class="recent-posts">
		<h2>Recent Posts</h2>
		<ul>
			{
				posts.map((post) => (
					<li>
						<a href={`/pepefeliblu/blog/${post.slug}/`}>
							<span class="title">{post.data.title}</span>
							<span class="date">
								{new Date(post.data.pubDate).toLocaleDateString(
									"en-us",
									{
										year: "numeric",
										month: "short",
										day: "numeric",
									},
								)}
							</span>
						</a>
					</li>
				))
			}
		</ul>
	</section>
	<ChristmasSnowfall client:only="react" />
	<NewYearFireworks client:only="react" />
</BaseLayout>
